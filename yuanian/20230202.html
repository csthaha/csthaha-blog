<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="btn">点我</button>
    <div id="box"></div>  

    <script>
        const btn = document.getElementById('btn');
        const box = document.getElementById('box');

        btn.addEventListener('click', function() {
            const MB = 1024 * 1024;
            log();

            function log() {
                const memory = performance.memory.totalJSHeapSize;
                const usagedMemory = Math.floor(memory / MB);
                box.insertAdjacentHTML('beforeend', `<span>${usagedMemory} </span>`);

                box.insertAdjacentText('beforebegin', `2023、`)

                const obj = {usagedMemory, str: 'g'.repeat(50 * MB)};
                console.log(obj); 

                setTimeout(() => log(), 50);
            }
        });

        // 通过 performance.memory.totalJSHeapSize 是可以拿到堆内存大小的。


        // element.insertAdjacentHTML(position, element)  将一段 element 插入到 dom 中
        // insertAdjacentHTML 方法将指定的文本解析为 Element 元素，并将结果节点插入到 DOM 树中的指定位置。
        // 它不会重新解析它正在使用的元素，因此它不会破坏元素内部的现有的元素。这避免了额外的序列化步骤，使其比直接
        // 使用 innerHTML 操作更快。


        // <!-- beforebegin   元素自身的前面-->
        // <p>
        // <!-- afterbegin    插入元素内部的第一个字节点之前-->
        // foo
        // <!-- beforeend     插入元素内部的最后一个字节点之后-->
        // </p>
        // <!-- afterend      元素自身的后面-->


        // element.insertAdjacentHTML(position, text)  
        // 方法将一个给定的文本节点插入在相对于被调用的元素给定的位置。

        // element.insertAdjacentElement(position, element)
        // 将一个给定的元素节点插入到相对于被调用元素的给定的一个位置。
        
    </script>
</body>
</html>